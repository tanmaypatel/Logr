/* Logr v0.1.0 (2015-01-08) */
/* A 'configurable' logging utility for JavaScript! */
var Logr;!function(Logr){var Formatters;!function(Formatters){var ErrorFormatter=function(){function ErrorFormatter(){}return ErrorFormatter.prototype.getMessage=function(error){return error.message?error.message:error.toString?error.toString():String(error)},ErrorFormatter.prototype.format=function(error,showStacktrace){if(error){var errorString=error.name?error.name+": ":"Error: ";return errorString+=this.getMessage(error),errorString+="\r\n",errorString+=error.fileName?" in file "+error.fileName:"",errorString+=error.lineNumber?" @ line "+error.lineNumber:"",showStacktrace&&error.stack&&(errorString+="\r\n",errorString+=error.stack),errorString}return""},ErrorFormatter}();Formatters.ErrorFormatter=ErrorFormatter}(Formatters=Logr.Formatters||(Logr.Formatters={}))}(Logr||(Logr={}));var Logr;!function(Logr){!function(LogLevel){LogLevel[LogLevel.ALL=Number.MIN_VALUE]="ALL",LogLevel[LogLevel.TRACE=1e4]="TRACE",LogLevel[LogLevel.DEBUG=2e4]="DEBUG",LogLevel[LogLevel.INFO=3e4]="INFO",LogLevel[LogLevel.WARN=4e4]="WARN",LogLevel[LogLevel.ERROR=5e4]="ERROR",LogLevel[LogLevel.FATAL=6e4]="FATAL",LogLevel[LogLevel.OFF=Number.MAX_VALUE]="OFF"}(Logr.LogLevel||(Logr.LogLevel={}));Logr.LogLevel}(Logr||(Logr={}));var Logr;!function(Logr){var LoggerConfig=function(){function LoggerConfig(name,parentLoggerConfig,level,publishers){if(this._name="",this._level=Logr.LogLevel.ALL,this._enabled=!0,this._logStackTraceForErrors=!0,this._publishers=[],this._name=name,this._parentLoggerConfig=parentLoggerConfig,level&&(this._level=level),publishers)for(var i=0;i<publishers.length;i++)this._publishers.push(publishers[i])}return Object.defineProperty(LoggerConfig.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(LoggerConfig.prototype,"parentLoggerConfig",{get:function(){return this._parentLoggerConfig},enumerable:!0,configurable:!0}),Object.defineProperty(LoggerConfig.prototype,"level",{get:function(){return this._level},set:function(value){this._level=value},enumerable:!0,configurable:!0}),Object.defineProperty(LoggerConfig.prototype,"enabled",{get:function(){return this._enabled},set:function(value){this._enabled=value},enumerable:!0,configurable:!0}),Object.defineProperty(LoggerConfig.prototype,"logStackTraceForErrors",{get:function(){return this._logStackTraceForErrors},set:function(value){this._logStackTraceForErrors=value},enumerable:!0,configurable:!0}),Object.defineProperty(LoggerConfig.prototype,"publishers",{get:function(){return this._publishers},enumerable:!0,configurable:!0}),LoggerConfig.prototype.getParents=function(){for(var parents=[],currentLoggerConfig=this;currentLoggerConfig.parentLoggerConfig;)parents.push(currentLoggerConfig.parentLoggerConfig),currentLoggerConfig=currentLoggerConfig.parentLoggerConfig;return parents},LoggerConfig}();Logr.LoggerConfig=LoggerConfig}(Logr||(Logr={}));var Logr;!function(Logr){var LogEvent=function(){function LogEvent(loggerName,level,timestamp,message){this._loggerName=loggerName,this._level=level,this._timestamp=timestamp,this._message=message}return Object.defineProperty(LogEvent.prototype,"loggerName",{get:function(){return this._loggerName},set:function(value){this._loggerName=value},enumerable:!0,configurable:!0}),Object.defineProperty(LogEvent.prototype,"level",{get:function(){return this._level},set:function(value){this._level=value},enumerable:!0,configurable:!0}),Object.defineProperty(LogEvent.prototype,"timestamp",{get:function(){return this._timestamp},set:function(value){this._timestamp=value},enumerable:!0,configurable:!0}),Object.defineProperty(LogEvent.prototype,"message",{get:function(){return this._message},set:function(value){this._message=value},enumerable:!0,configurable:!0}),Object.defineProperty(LogEvent.prototype,"additionalData",{get:function(){return this._additionalData},set:function(value){this._additionalData=value},enumerable:!0,configurable:!0}),LogEvent}();Logr.LogEvent=LogEvent}(Logr||(Logr={}));var Logr;!function(Logr){var Utils;!function(Utils){var StringUtils=function(){function StringUtils(){}return StringUtils.lpad=function(originalString,stringToPad,requiredLength){for(var paddedString=originalString;paddedString.length<requiredLength;)paddedString=stringToPad+paddedString;return paddedString},StringUtils.rpad=function(originalString,stringToPad,requiredLength){for(var paddedString=originalString;paddedString.length<requiredLength;)paddedString+=stringToPad;return paddedString},StringUtils}();Utils.StringUtils=StringUtils}(Utils=Logr.Utils||(Logr.Utils={}))}(Logr||(Logr={}));var Logr;!function(Logr){var Utils;!function(Utils){var DateTimeUtils=function(){function DateTimeUtils(){}return DateTimeUtils.now=function(){var timestampForNow=Date.now?Date.now():(new Date).getTime();return timestampForNow},DateTimeUtils.format=function(date){var formattedDateTokens=[];formattedDateTokens.push(DateTimeUtils.abbriviatedDayNames[date.getDay()]),formattedDateTokens.push(DateTimeUtils.abbriviatedMonthNames[date.getMonth()]),formattedDateTokens.push(Utils.StringUtils.lpad(date.getDate()+"","0",2)),formattedDateTokens.push(date.getFullYear()+"");var formattedTimeTokens=[];return formattedTimeTokens.push(Utils.StringUtils.lpad(date.getHours()+"","0",2)),formattedTimeTokens.push(Utils.StringUtils.lpad(date.getMinutes()+"","0",2)),formattedTimeTokens.push(Utils.StringUtils.lpad(date.getSeconds()+"","0",2)+"."+Utils.StringUtils.lpad(date.getMilliseconds()+"","0",3)),formattedDateTokens.join(" ")+" "+formattedTimeTokens.join(":")},DateTimeUtils.fullMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],DateTimeUtils.abbriviatedMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DateTimeUtils.fullDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DateTimeUtils.abbriviatedDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],DateTimeUtils}();Utils.DateTimeUtils=DateTimeUtils}(Utils=Logr.Utils||(Logr.Utils={}))}(Logr||(Logr={}));var Logr;!function(Logr){var Logger=function(){function Logger(loggerConfig){this._loggerConfig=loggerConfig}return Object.defineProperty(Logger.prototype,"loggerConfig",{get:function(){return this._loggerConfig},enumerable:!0,configurable:!0}),Logger.prototype.isEnabled=function(){return this.loggerConfig.enabled},Logger.prototype.enable=function(){this.loggerConfig.enabled=!0},Logger.prototype.disable=function(){this.loggerConfig.enabled=!1},Logger.prototype.addPublisher=function(publisher){this.loggerConfig.publishers.push(publisher)},Logger.prototype.removePublisher=function(publisher){var publisherIndex=this.loggerConfig.publishers.indexOf(publisher);-1!==publisherIndex&&this.loggerConfig.publishers.splice(publisherIndex,1)},Logger.prototype._performLog=function(level,message,additionalArguments){var logEvent=new Logr.LogEvent(this.loggerConfig.name,level,Logr.Utils.DateTimeUtils.now(),message);logEvent.additionalData=additionalArguments;for(var parents=this.loggerConfig.getParents(),publishers=[],isLoggingEnabled=!0,i=0;i<parents.length;i++){isLoggingEnabled=parents[i].enabled&&isLoggingEnabled;for(var j=0;j<parents[i].publishers.length;j++)-1===publishers.indexOf(parents[i].publishers[j])&&publishers.push(parents[i].publishers[j])}isLoggingEnabled=this.loggerConfig.enabled&&isLoggingEnabled;for(var j=0;j<this.loggerConfig.publishers.length;j++)-1===publishers.indexOf(this.loggerConfig.publishers[j])&&publishers.push(this.loggerConfig.publishers[j]);if(isLoggingEnabled)for(var i=0;i<publishers.length;i++)publishers[i].publish(logEvent)},Object.defineProperty(Logger.prototype,"log",{get:function(){return this.trace},enumerable:!0,configurable:!0}),Logger.prototype.trace=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._performLog(1e4,message,args)},Logger.prototype.debug=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._performLog(2e4,message,args)},Logger.prototype.info=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._performLog(3e4,message,args)},Logger.prototype.warn=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._performLog(4e4,message,args)},Logger.prototype.error=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._performLog(5e4,message,args)},Logger.prototype.fatal=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];this._performLog(6e4,message,args)},Logger}();Logr.Logger=Logger}(Logr||(Logr={}));var Logr;!function(Logr){var Representers;!function(Representers){var DefaultStringRepresenter=function(){function DefaultStringRepresenter(){}return DefaultStringRepresenter.prototype.represent=function(logEvent){var representationTokens=[];return representationTokens.push(logEvent.loggerName||"DEFAULT"),representationTokens.push(Logr.Utils.DateTimeUtils.format(new Date(logEvent.timestamp))),representationTokens.push(Logr.LogLevel[logEvent.level]),representationTokens.push(logEvent.message),representationTokens.join(" // ")},DefaultStringRepresenter}();Representers.DefaultStringRepresenter=DefaultStringRepresenter}(Representers=Logr.Representers||(Logr.Representers={}))}(Logr||(Logr={}));var Logr;!function(Logr){var Publishers;!function(Publishers){var BasicConsolePublisher=function(){function BasicConsolePublisher(){this._representer=new Logr.Representers.DefaultStringRepresenter}return Object.defineProperty(BasicConsolePublisher.prototype,"representer",{get:function(){return this._representer},enumerable:!0,configurable:!0}),BasicConsolePublisher.prototype.publish=function(logEvent){var representation=this.representer.represent(logEvent),logFunction=console.log;switch(logEvent.level){case 1e4:logFunction=console.log;break;case 2e4:logFunction=console.debug;break;case 3e4:logFunction=console.info;break;case 4e4:logFunction=console.warn;break;case 5e4:logFunction=console.error;break;case 6e4:logFunction=console.error}logFunction.call(console,representation)},BasicConsolePublisher}();Publishers.BasicConsolePublisher=BasicConsolePublisher}(Publishers=Logr.Publishers||(Logr.Publishers={}))}(Logr||(Logr={}));var Logr;!function(Logr){var Representers;!function(Representers){var DefaultJSONRepresenter=function(){function DefaultJSONRepresenter(){}return DefaultJSONRepresenter.prototype.represent=function(logEvent){var JSONRepresentation={};return JSONRepresentation.logger=logEvent.loggerName?logEvent.loggerName:"DEFAULT",JSONRepresentation.logLevel=logEvent.level,JSONRepresentation.timestamp=logEvent.timestamp,JSONRepresentation.message=logEvent.message,JSONRepresentation.additionalData=logEvent.additionalData,JSONRepresentation},DefaultJSONRepresenter}();Representers.DefaultJSONRepresenter=DefaultJSONRepresenter}(Representers=Logr.Representers||(Logr.Representers={}))}(Logr||(Logr={}));var Logr;!function(Logr){var Publishers;!function(Publishers){var EnhancedConsolePublisher=function(){function EnhancedConsolePublisher(){this._representer=new Logr.Representers.DefaultJSONRepresenter}return Object.defineProperty(EnhancedConsolePublisher.prototype,"representer",{get:function(){return this._representer},enumerable:!0,configurable:!0}),EnhancedConsolePublisher.prototype.publish=function(logEvent){var representation=this.representer.represent(logEvent),stringPartials=[];stringPartials.push("%c"+representation.logger),stringPartials.push("%c"+Logr.Utils.DateTimeUtils.format(new Date(representation.timestamp))),stringPartials.push("%c"+Logr.LogLevel[representation.logLevel]),stringPartials.push("%c"+representation.message);var logLevelColor="",messageColor="black";switch(representation.logLevel){case 1e4:logLevelColor="gray";break;case 2e4:logLevelColor="darkgreen";break;case 3e4:logLevelColor="blue";break;case 4e4:logLevelColor="orange";break;case 5e4:messageColor="red",logLevelColor="red";break;case 6e4:logLevelColor="darkred",messageColor="darkred"}console.log.apply(console,[stringPartials.join(" "),"color: darkgray","color: silver","color: "+logLevelColor,"color: "+messageColor].concat(logEvent.additionalData||[]))},EnhancedConsolePublisher}();Publishers.EnhancedConsolePublisher=EnhancedConsolePublisher}(Publishers=Logr.Publishers||(Logr.Publishers={}))}(Logr||(Logr={}));var Logr;!function(Logr){var Manager=function(){function Manager(){}return Manager.getLogger=function(name){var logger=null,matchedLogger=Manager._findLoggerByName(name);if(matchedLogger)logger=matchedLogger;else{var parentLoggerConfig=Manager._findParentLoggerConfigForName(name),newLoggerConfig=new Logr.LoggerConfig(name,parentLoggerConfig,null),newLogger=new Logr.Logger(newLoggerConfig);Manager._loggers.push(newLogger),logger=newLogger}return logger},Manager._findLoggerByName=function(name){var macthedLogger=null;if(name)for(var i=0;i<Manager._loggers.length;i++){var currentLogger=Manager._loggers[i];if(currentLogger.loggerConfig.name===name){macthedLogger=currentLogger;break}}else macthedLogger=Manager._rootLogger;return macthedLogger},Manager._findParentLoggerConfigForName=function(name){var matchedLoggerConfig=null;if(name){for(var matchedLogger=null,tokens=name.split(Manager.NAMESPACE_SEPARATOR);!matchedLogger;){var remainingNamespace=(tokens.pop(),tokens.join(Manager.NAMESPACE_SEPARATOR));matchedLogger=Manager._findLoggerByName(remainingNamespace)}matchedLoggerConfig=matchedLogger.loggerConfig}else matchedLoggerConfig=Manager.getDefaultConfig();return matchedLoggerConfig},Manager.getDefaultConfig=function(){return Manager._rootLoggerConfig},Manager._rootLoggerConfig=new Logr.LoggerConfig("",null,Logr.LogLevel.ALL,[new Logr.Publishers.EnhancedConsolePublisher]),Manager._rootLogger=new Logr.Logger(Manager._rootLoggerConfig),Manager.NAMESPACE_SEPARATOR=".",Manager._loggers=[Manager._rootLogger],Manager}();Logr.Manager=Manager}(Logr||(Logr={}));